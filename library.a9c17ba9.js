!function(){function t(t,e,n,a){Object.defineProperty(t,e,{get:n,set:a,enumerable:!0,configurable:!0})}function e(t){return t&&t.__esModule?t.default:t}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},i={},o=n.parcelRequired7c6;null==o&&((o=function(t){if(t in a)return a[t].exports;if(t in i){var e=i[t];delete i[t];var n={id:t,exports:{}};return a[t]=n,e.call(n.exports,n,n.exports),n.exports}var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(t,e){i[t]=e},n.parcelRequired7c6=o),o.register("iE7OH",(function(e,n){var a,i;t(e.exports,"register",(function(){return a}),(function(t){return a=t})),t(e.exports,"resolve",(function(){return i}),(function(t){return i=t}));var o={};a=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)o[e[n]]=t[e[n]]},i=function(t){var e=o[t];if(null==e)throw new Error("Could not resolve bundle with id "+t);return e}})),o.register("aNJCr",(function(e,n){var a;t(e.exports,"getBundleURL",(function(){return a}),(function(t){return a=t}));var i={};function o(t){return(""+t).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}a=function(t){var e=i[t];return e||(e=function(){try{throw new Error}catch(e){var t=(""+e.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\/\/[^)\n]+/g);if(t)return o(t[2])}return"/"}(),i[t]=e),e}})),o("iE7OH").register(JSON.parse('{"jNRdE":"library.a9c17ba9.js","kxKJ3":"symbol-defs.ce986458.svg","4DP8a":"library.20eeb3b9.js"}'));var s,r,c=o("5GYIm"),l=(c=o("5GYIm"),document.querySelector(".pagination__list")),d=document.querySelector(".pagination"),u=document.querySelector(".pagination__btn-prev"),g=document.querySelector(".pagination__btn-next"),p="pageLib",_=Number(JSON.parse(localStorage.getItem(p)));function m(t){localStorage.setItem(p,JSON.stringify(t)),_=Number(JSON.parse(localStorage.getItem(p)))}function f(t){r=JSON.parse(localStorage.getItem("".concat(t))),s=Math.ceil(r.length/20),_||m(1),_>s&&m(s);var e=20*(_-1);(0,c.markUpForLibrary)(r.slice(e,e+20)),v()}function v(){var t="";if(_>=1&&(t+='<li class="pagination__item">1</li>'),2===_&&(t+='<li class="pagination__item">2</li>'),3===_&&(t+='<li class="pagination__item">2</li><li class="pagination__item">3</li>'),4===_&&(t+='<li class="pagination__item-hidden is-hidden"><span>...</span></li><li class="pagination__item">2</li><li class="pagination__item">3</li><li class="pagination__item">4</li>'),_>4&&(t+='<li class="pagination__item-hidden"><span>...</span></li><li class="pagination__item">'.concat(_-2,'</li><li class="pagination__item">').concat(_-1,'</li><li class="pagination__item">').concat(_,"</li>")),s-_>=4&&(t+='<li class="pagination__item">'.concat(_+1,'</li><li class="pagination__item">').concat(_+2,'</li><li class="pagination__item-hidden"><span>...</span></li>')),s-_==3&&(t+='<li class="pagination__item">'.concat(_+1,'</li><li class="pagination__item">').concat(_+2,'</li><li class="pagination__item-hidden is-hidden"><span>...</span></li>')),s-_==2&&(t+='<li class="pagination__item">'.concat(_+1,"</li>")),s-_==0)return l.innerHTML=t,h(),S(),L(),void d.addEventListener("click",b);t+='<li class="pagination__item">'.concat(s,"</li>"),l.innerHTML=t,h(),S(),L(),d.addEventListener("click",b)}function b(t){"BUTTON"===t.target.nodeName&&("prev"===t.target.dataset.btn&&(m(_-1),y()),"next"===t.target.dataset.btn&&(m(_+1),y())),"LI"!==t.target.nodeName||t.target.classList.contains("pagination__item-hidden")||String(_)!==t.target.textContent&&(m(Number(t.target.textContent)),y())}function h(){l.lastElementChild.classList.add("pagination-edge"),_>3&&l.firstElementChild.classList.add("pagination-edge"),s-_<3&&l.lastElementChild.classList.remove("pagination-edge")}function S(){document.querySelectorAll(".pagination__item").forEach((function(t){t.textContent===String(_)&&t.classList.add("pagination__currentPage")}))}function L(){1===_?(u.disabled=!0,u.classList.remove("pagination__btn"),u.classList.add("pagination__btn-Ldisabled")):(u.disabled=!1,u.classList.add("pagination__btn"),u.classList.remove("pagination__btn-Ldisabled")),_===s?(g.disabled=!0,g.classList.remove("pagination__btn"),g.classList.add("pagination__btn-Rdisabled")):(g.disabled=!1,g.classList.add("pagination__btn"),g.classList.remove("pagination__btn-Rdisabled"))}function y(){d.removeEventListener("click",b);var t=20*(_-1);(0,c.markUpForLibrary)(r.slice(t,t+20)),v(),console.log("~ currentPage",_),console.log("~ totalPages",s)}function N(){l.innerHTML=""}var w;w=o("aNJCr").getBundleURL("jNRdE")+o("iE7OH").resolve("kxKJ3");var O=document.querySelector(".backdrop");function E(t,n,a){if(t){document.addEventListener("click",k),document.addEventListener("keydown",q);var i=JSON.parse(localStorage.getItem("genres"));t;var o='\n      <div class="modal-group">\n        <button data-modal-close class="modal-group__close-btn">\n        <object class="modal-group__close-object">\n            <svg class="modal-group__close-icon" width="28" height="28">\n              <use href="'.concat(e(w),'#icon-close-modal"></use>\n            </svg>\n          </object>\n        </button>\n        <div class="modal-group__img-wrapper">\n          <img\n            class="modal-group__img"\n            src="').concat(t.poster_path?"https://image.tmdb.org/t/p/w500"+t.poster_path:"https://s1.hostingkartinok.com/uploads/images/2022/07/40ceaea2e22257d2a139ca5a0c0b8ba9.jpg",'"\n            alt="').concat(t.original_title,'"\n            \n          />\n        </div>\n        <div class="modal-group__wrapper">\n          <h2 class="modal-group__title">').concat(t.original_title,'</h2>\n          <table class="table">\n            <tbody>\n              <tr>\n                <td class="table__title">Vote / Votes</td>\n                <td class="table__text">\n                  <span class="gallery-text__rating table-text-orange">').concat(t.vote_average,'</span>\n                  /\n                  <span class="table-text-grey">').concat(t.vote_count,'</span>\n                </td>\n              </tr>\n  \n              <tr>\n                <td class="table__title">Popularity</td>\n                <td class="table__text">').concat(t.popularity,'</td>\n              </tr>\n              <tr>\n                <td class="table__title">Original Title</td>\n                <td class="table__text">').concat(t.original_title,'</td>\n              </tr>\n              <tr>\n                <td class="table__title">Genre</td>\n                <td class="table__text">').concat(t.genre_ids.length>0?t.genre_ids.map((function(t){return" "+i[t]})):"No genres found",'</td>\n              </tr>\n            </tbody>\n          </table>\n  \n          <h3 class="modal-group__about-title">About</h3>\n          <p class="modal-group__about-text">\n          ').concat(t.overview?t.overview:"No info",'\n          </p>\n          <div class="modal-group__btns">\n            <button class="watched-btn delete-btn" type="submit" >').concat(n.toUpperCase(),'</button>\n            <button class="queue-btn" type="submit">').concat(a.toUpperCase(),"</button>\n          </div>\n        </div>\n      </div>");O.innerHTML=o,document.querySelector(".modal-group__close-btn").addEventListener("click",(function(){O.classList.add("is-hidden"),document.removeEventListener("click",k),document.removeEventListener("keydown",q)}))}}function q(t){27===t.keyCode&&O.classList.add("is-hidden")}function k(t){"DIV"===t.target.nodeName&&O.classList.add("is-hidden")}var x=o("iU1Pc");e(x).Notify.init({width:"300px",position:"top-left",closeButton:!1,cssAnimationStyle:"from-right",timeout:1e3,success:{background:"#FF6B08",svgColor:"#32c682",titleColor:"#1e1e1e",messageColor:"#242424",buttonBackground:"#32c682",buttonColor:"#fff",backOverlayColor:"rgba(50,198,130,0.2)"},info:{background:"#50c184"}});var I,J=document.querySelector(".library__button--watched"),C=document.querySelector(".library__button--queue");V();var R=[],M=[];localStorage.getItem("watched")?M=JSON.parse(localStorage.getItem("watched")):localStorage.setItem("watched",JSON.stringify([])),localStorage.getItem("queue")?R=JSON.parse(localStorage.getItem("queue")):localStorage.setItem("queue",JSON.stringify([]));var F,H,T=document.querySelector(".gallery"),A=document.querySelector(".backdrop");T.addEventListener("click",(function(t){if(!t.target.closest("li"))return;U=J.classList.contains("active")?"watched":"queue";var e=JSON.parse(localStorage.getItem(U));A.classList.remove("is-hidden");var n=t.target.closest("li").id;I=e.find((function(t){return String(t.id)===n})),J.classList.contains("active")?E(I,"REMOVE FROM LIST","add to queue"):E(I,"REMOVE FROM LIST","add to watched");F=document.querySelector(".delete-btn"),H=document.querySelector(".queue-btn"),F.addEventListener("click",j),H.addEventListener("click",P),function(){if(C.classList.contains("active")){JSON.parse(localStorage.getItem("watched")).some((function(t){return t.id===I.id}))&&(H.setAttribute("disabled",!0),H.textContent="Added to watched",H.classList.add("inactive"))}else if(J.classList.contains("active")){JSON.parse(localStorage.getItem("queue")).some((function(t){return t.id===I.id}))&&(H.setAttribute("disabled",!0),H.textContent="Added to queue",H.classList.add("inactive"))}}()}));var U="";function j(){J.classList.contains("active")?B("watched"):C.classList.contains("active")&&B("queue")}function P(){if(C.classList.contains("active")){var t=(M=JSON.parse(localStorage.getItem("watched"))).filter((function(t){return t.id!==I.id}));return(M=t).push(I),localStorage.setItem("watched",JSON.stringify(M)),e(x).Notify.info("Movie was addeed to your watched list"),H.setAttribute("disabled",!0),void H.classList.add("inactive")}if(J.classList.contains("active")){R.push(I);var n=(R=JSON.parse(localStorage.getItem("queue"))).filter((function(t){return t.id!==I.id}));return(R=n).push(I),localStorage.setItem("queue",JSON.stringify(R)),e(x).Notify.info("Movie was addeed to your queue"),H.setAttribute("disabled",!0),void H.classList.add("inactive")}}function B(t){if("REMOVE FROM LIST"===F.textContent){e(x).Notify.success("Film was removed"),F.classList.add("visually-hidden");var n=JSON.parse(localStorage.getItem(t)).filter((function(t){return t.id!==I.id}));localStorage.setItem(t,JSON.stringify(n)),"watched"===t?V():"queue"===t&&D()}}function V(){J.classList.add("active"),C.classList.remove("active");var t=JSON.parse(localStorage.getItem("watched"));t&&t.length>0?f("watched"):(N(),(0,c.markUpForLibrary)([]))}function D(){var t=JSON.parse(localStorage.getItem("queue"));C.classList.add("active"),J.classList.remove("active"),t&&t.length>0?f("queue"):(N(),(0,c.markUpForLibrary)([]))}J.addEventListener("click",V),C.addEventListener("click",D)}();
//# sourceMappingURL=library.a9c17ba9.js.map
