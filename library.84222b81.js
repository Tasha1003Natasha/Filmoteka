function t(t,e,i,a){Object.defineProperty(t,e,{get:i,set:a,enumerable:!0,configurable:!0})}function e(t){return t&&t.__esModule?t.default:t}var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},n={},s=i.parcelRequired7c6;null==s&&((s=function(t){if(t in a)return a[t].exports;if(t in n){var e=n[t];delete n[t];var i={id:t,exports:{}};return a[t]=i,e.call(i.exports,i,i.exports),i.exports}var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(t,e){n[t]=e},i.parcelRequired7c6=s),s.register("kyEFX",(function(e,i){var a,n;t(e.exports,"register",(function(){return a}),(function(t){return a=t})),t(e.exports,"resolve",(function(){return n}),(function(t){return n=t}));var s={};a=function(t){for(var e=Object.keys(t),i=0;i<e.length;i++)s[e[i]]=t[e[i]]},n=function(t){var e=s[t];if(null==e)throw new Error("Could not resolve bundle with id "+t);return e}})),s("kyEFX").register(JSON.parse('{"bHX8u":"library.84222b81.js","9v6fF":"symbol-defs.ce986458.svg","jVFD5":"library.9bbbddce.js"}'));var o=s("9o3Er");o=s("9o3Er");const l=document.querySelector(".pagination__list"),r=document.querySelector(".pagination"),c=document.querySelector(".pagination__btn-prev"),d=document.querySelector(".pagination__btn-next");let u,g,p=Number(JSON.parse(localStorage.getItem("pageLib")));function _(t){localStorage.setItem("pageLib",JSON.stringify(t)),p=Number(JSON.parse(localStorage.getItem("pageLib")))}function m(t){g=JSON.parse(localStorage.getItem(`${t}`)),u=Math.ceil(g.length/20),p||_(1),p>u&&_(u);const e=20*(p-1);(0,o.markUpForLibrary)(g.slice(e,e+20)),b()}function b(){let t="";if(p>=1&&(t+='<li class="pagination__item">1</li>'),2===p&&(t+='<li class="pagination__item">2</li>'),3===p&&(t+='<li class="pagination__item">2</li><li class="pagination__item">3</li>'),4===p&&(t+='<li class="pagination__item-hidden is-hidden"><span>...</span></li><li class="pagination__item">2</li><li class="pagination__item">3</li><li class="pagination__item">4</li>'),p>4&&(t+=`<li class="pagination__item-hidden"><span>...</span></li><li class="pagination__item">${p-2}</li><li class="pagination__item">${p-1}</li><li class="pagination__item">${p}</li>`),u-p>=4&&(t+=`<li class="pagination__item">${p+1}</li><li class="pagination__item">${p+2}</li><li class="pagination__item-hidden"><span>...</span></li>`),u-p==3&&(t+=`<li class="pagination__item">${p+1}</li><li class="pagination__item">${p+2}</li><li class="pagination__item-hidden is-hidden"><span>...</span></li>`),u-p==2&&(t+=`<li class="pagination__item">${p+1}</li>`),u-p==0)return l.innerHTML=t,v(),S(),L(),void r.addEventListener("click",f);t+=`<li class="pagination__item">${u}</li>`,l.innerHTML=t,v(),S(),L(),r.addEventListener("click",f)}function f(t){"BUTTON"===t.target.nodeName&&("prev"===t.target.dataset.btn&&(_(p-1),h()),"next"===t.target.dataset.btn&&(_(p+1),h())),"LI"!==t.target.nodeName||t.target.classList.contains("pagination__item-hidden")||String(p)!==t.target.textContent&&(_(Number(t.target.textContent)),h())}function v(){l.lastElementChild.classList.add("pagination-edge"),p>3&&l.firstElementChild.classList.add("pagination-edge"),u-p<3&&l.lastElementChild.classList.remove("pagination-edge")}function S(){document.querySelectorAll(".pagination__item").forEach((t=>{t.textContent===String(p)&&t.classList.add("pagination__currentPage")}))}function L(){1===p?(c.disabled=!0,c.classList.remove("pagination__btn"),c.classList.add("pagination__btn-Ldisabled")):(c.disabled=!1,c.classList.add("pagination__btn"),c.classList.remove("pagination__btn-Ldisabled")),p===u?(d.disabled=!0,d.classList.remove("pagination__btn"),d.classList.add("pagination__btn-Rdisabled")):(d.disabled=!1,d.classList.add("pagination__btn"),d.classList.remove("pagination__btn-Rdisabled"))}function h(){r.removeEventListener("click",f);const t=20*(p-1);(0,o.markUpForLibrary)(g.slice(t,t+20)),b(),console.log("~ currentPage",p),console.log("~ totalPages",u)}function y(){l.innerHTML=""}var w;let N;w=new URL(s("kyEFX").resolve("9v6fF"),import.meta.url).toString();const O=document.querySelector(".backdrop");function E(t,i,a){if(t){document.addEventListener("click",k),document.addEventListener("keydown",q);const n=JSON.parse(localStorage.getItem("genres")),s="https://image.tmdb.org/t/p/w500";N=t;const o=`\n      <div class="modal-group">\n        <button data-modal-close class="modal-group__close-btn">\n        <object class="modal-group__close-object">\n            <svg class="modal-group__close-icon" width="28" height="28">\n              <use href="${e(w)}#icon-close-modal"></use>\n            </svg>\n          </object>\n        </button>\n        <div class="modal-group__img-wrapper">\n          <img\n            class="modal-group__img"\n            src="${t.poster_path?s+t.poster_path:"https://s1.hostingkartinok.com/uploads/images/2022/07/40ceaea2e22257d2a139ca5a0c0b8ba9.jpg"}"\n            alt="${t.original_title}"\n            \n          />\n        </div>\n        <div class="modal-group__wrapper">\n          <h2 class="modal-group__title">${t.original_title}</h2>\n          <table class="table">\n            <tbody>\n              <tr>\n                <td class="table__title">Vote / Votes</td>\n                <td class="table__text">\n                  <span class="gallery-text__rating table-text-orange">${t.vote_average}</span>\n                  /\n                  <span class="table-text-grey">${t.vote_count}</span>\n                </td>\n              </tr>\n  \n              <tr>\n                <td class="table__title">Popularity</td>\n                <td class="table__text">${t.popularity}</td>\n              </tr>\n              <tr>\n                <td class="table__title">Original Title</td>\n                <td class="table__text">${t.original_title}</td>\n              </tr>\n              <tr>\n                <td class="table__title">Genre</td>\n                <td class="table__text">${t.genre_ids.length>0?t.genre_ids.map((t=>" "+n[t])):"No genres found"}</td>\n              </tr>\n            </tbody>\n          </table>\n  \n          <h3 class="modal-group__about-title">About</h3>\n          <p class="modal-group__about-text">\n          ${t.overview?t.overview:"No info"}\n          </p>\n          <div class="modal-group__btns">\n            <button class="watched-btn delete-btn" type="submit" >${i.toUpperCase()}</button>\n            <button class="queue-btn" type="submit">${a.toUpperCase()}</button>\n          </div>\n        </div>\n      </div>`;O.innerHTML=o;document.querySelector(".modal-group__close-btn").addEventListener("click",(()=>{O.classList.add("is-hidden"),document.removeEventListener("click",k),document.removeEventListener("keydown",q)}))}}function q(t){27===t.keyCode&&O.classList.add("is-hidden")}function k(t){"DIV"===t.target.nodeName&&O.classList.add("is-hidden")}var I=s("eWCmQ");e(I).Notify.init({width:"300px",position:"top-left",closeButton:!1,cssAnimationStyle:"from-right",timeout:1e3,success:{background:"#FF6B08",svgColor:"#32c682",titleColor:"#1e1e1e",messageColor:"#242424",buttonBackground:"#32c682",buttonColor:"#fff",backOverlayColor:"rgba(50,198,130,0.2)"},info:{background:"#50c184"}});const x=document.querySelector(".library__button--watched"),$=document.querySelector(".library__button--queue");let J;P();let C=[],F=[];localStorage.getItem("watched")?F=JSON.parse(localStorage.getItem("watched")):localStorage.setItem("watched",JSON.stringify([])),localStorage.getItem("queue")?C=JSON.parse(localStorage.getItem("queue")):localStorage.setItem("queue",JSON.stringify([]));const M=document.querySelector(".gallery"),R=document.querySelector(".backdrop");let T,A;M.addEventListener("click",(function(t){if(!t.target.closest("li"))return;H=x.classList.contains("active")?"watched":"queue";let e=JSON.parse(localStorage.getItem(H));R.classList.remove("is-hidden");const i=t.target.closest("li").id;J=e.find((t=>String(t.id)===i)),x.classList.contains("active")?E(J,"REMOVE FROM LIST","add to queue"):E(J,"REMOVE FROM LIST","add to watched");T=document.querySelector(".delete-btn"),A=document.querySelector(".queue-btn"),T.addEventListener("click",U),A.addEventListener("click",j),function(){if($.classList.contains("active")){JSON.parse(localStorage.getItem("watched")).some((t=>t.id===J.id))&&(A.setAttribute("disabled",!0),A.textContent="Added to watched",A.classList.add("inactive"))}else if(x.classList.contains("active")){JSON.parse(localStorage.getItem("queue")).some((t=>t.id===J.id))&&(A.setAttribute("disabled",!0),A.textContent="Added to queue",A.classList.add("inactive"))}}()}));let H="";function U(){x.classList.contains("active")?V("watched"):$.classList.contains("active")&&V("queue")}function j(){if($.classList.contains("active")){F=JSON.parse(localStorage.getItem("watched"));let t=F.filter((t=>t.id!==J.id));return F=t,F.push(J),localStorage.setItem("watched",JSON.stringify(F)),e(I).Notify.info("Movie was addeed to your watched list"),A.setAttribute("disabled",!0),void A.classList.add("inactive")}if(x.classList.contains("active")){C.push(J),C=JSON.parse(localStorage.getItem("queue"));let t=C.filter((t=>t.id!==J.id));return C=t,C.push(J),localStorage.setItem("queue",JSON.stringify(C)),e(I).Notify.info("Movie was addeed to your queue"),A.setAttribute("disabled",!0),void A.classList.add("inactive")}}function V(t){if("REMOVE FROM LIST"===T.textContent){e(I).Notify.success("Film was removed"),T.classList.add("visually-hidden");let i=JSON.parse(localStorage.getItem(t)).filter((t=>t.id!==J.id));localStorage.setItem(t,JSON.stringify(i)),"watched"===t?P():"queue"===t&&B()}}function P(){x.classList.add("active"),$.classList.remove("active");const t=JSON.parse(localStorage.getItem("watched"));t&&t.length>0?m("watched"):(y(),(0,o.markUpForLibrary)([]))}function B(){const t=JSON.parse(localStorage.getItem("queue"));$.classList.add("active"),x.classList.remove("active"),t&&t.length>0?m("queue"):(y(),(0,o.markUpForLibrary)([]))}x.addEventListener("click",P),$.addEventListener("click",B);
//# sourceMappingURL=library.84222b81.js.map
