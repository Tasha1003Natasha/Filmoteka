{"mappings":"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","sources":["src/js/api/fetchApi.js","src/js/pagination.js","src/index.js"],"sourcesContent":["export { fetchTrends, fetchByName, fetchGenres, fetchVideo };\nconst key = 'fdee5313a0b876498560bfe4baaab806';\nfunction fetchByName(name, page = 1) {\n  const url = `https://api.themoviedb.org/3/search/movie?`;\n\n  return fetch(\n    `${url}api_key=${key}&language=en-US&page=${page}&include_adult=false&query=${name}`\n  )\n    .then(res => res.json())\n    .catch(err => console.log(err));\n}\n\nfunction fetchTrends(page = 1) {\n  if (!page) {\n    page = 1;\n  }\n\n  return fetch(\n    `https://api.themoviedb.org/3/trending/movie/day?api_key=${key}&page=${page}&language=en-US`\n  ).then(res => res.json());\n  // .then(res=>console.log(res)).catch(err=>console.log(err))\n}\n\n// https://api.themoviedb.org/3/search/movie?${key}&query=${name}&page=1&include_adult=false\nfunction fetchGenres() {\n  return fetch(\n    `https://api.themoviedb.org/3/genre/movie/list?language=en-US&api_key=fdee5313a0b876498560bfe4baaab806`\n  )\n    .then(res => res.json())\n    .catch(err => console.log(err));\n}\n\nfunction fetchVideo(id) {\n  return fetch(\n    `https://api.themoviedb.org/3/movie/${id}?append_to_response=videos&api_key=fdee5313a0b876498560bfe4baaab806&include_adult=false`\n  ).then(res => res.json());\n}\n","import { fetchTrends, fetchByName } from './api/fetchApi';\nimport { markUpForGallery } from '/src/index';\nconst paginList = document.querySelector('.pagination__list');\nconst paginBlock = document.querySelector('.pagination');\nconst prevBtn = document.querySelector('.pagination__btn-prev');\nconst nextBtn = document.querySelector('.pagination__btn-next');\nconst PAGE = 'page';\n\nlet currentPage = Number(JSON.parse(localStorage.getItem(PAGE))) || 1;\nlet totalPages;\nlet searchName = null;\n\nfunction changeCurrentPage(page) {\n  localStorage.setItem(PAGE, JSON.stringify(page));\n  currentPage = Number(JSON.parse(localStorage.getItem(PAGE)));\n}\n\n// function firstPaginationCall(pages, response) {\n//   markUpForGallery(response);\n//   paginationMarkup(currentPage, pages);\n// }\n\nfunction paginationMarkup(page, pages, name = null) {\n  changeCurrentPage(page);\n  totalPages = Number(pages);\n  searchName = name;\n  paginBlock.removeEventListener('click', onClickPagination);\n  let markup = '';\n  if (currentPage >= 1) {\n    markup += `<li class=\"pagination__item\">1</li>`;\n  }\n  if (currentPage === 2) {\n    markup += '<li class=\"pagination__item\">2</li>';\n  }\n  if (currentPage === 3) {\n    markup +=\n      '<li class=\"pagination__item\">2</li><li class=\"pagination__item\">3</li>';\n  }\n  if (currentPage === 4) {\n    markup += `<li class=\"pagination__item-hidden is-hidden\"><span>...</span></li><li class=\"pagination__item\">2</li><li class=\"pagination__item\">3</li><li class=\"pagination__item\">4</li>`;\n  }\n  if (currentPage > 4) {\n    markup += `<li class=\"pagination__item-hidden\"><span>...</span></li><li class=\"pagination__item\">${\n      currentPage - 2\n    }</li><li class=\"pagination__item\">${\n      currentPage - 1\n    }</li><li class=\"pagination__item\">${currentPage}</li>`;\n  }\n  if (totalPages - currentPage >= 4) {\n    markup += `<li class=\"pagination__item\">${\n      currentPage + 1\n    }</li><li class=\"pagination__item\">${\n      currentPage + 2\n    }</li><li class=\"pagination__item-hidden\"><span>...</span></li>`;\n  }\n  if (totalPages - currentPage === 3) {\n    markup += `<li class=\"pagination__item\">${\n      currentPage + 1\n    }</li><li class=\"pagination__item\">${\n      currentPage + 2\n    }</li><li class=\"pagination__item-hidden is-hidden\"><span>...</span></li>`;\n  }\n  if (totalPages - currentPage === 2) {\n    markup += `<li class=\"pagination__item\">${currentPage + 1}</li>`;\n  }\n  if (totalPages - currentPage === 0) {\n    paginList.innerHTML = markup;\n    addEdgeClass();\n    addCurrentClassBtn();\n    isEdgePage();\n    paginBlock.addEventListener('click', onClickPagination);\n    return;\n  }\n  markup += `<li class=\"pagination__item\">${totalPages}</li>`;\n  paginList.innerHTML = markup;\n  addEdgeClass();\n  addCurrentClassBtn();\n  isEdgePage();\n  paginBlock.addEventListener('click', onClickPagination);\n}\n\nfunction onClickPagination(evt) {\n  if (evt.target.nodeName === 'BUTTON') {\n    if (evt.target.dataset.btn === 'prev') {\n      changeCurrentPage(currentPage - 1);\n      sendRequest();\n    }\n    if (evt.target.dataset.btn === 'next') {\n      \n      changeCurrentPage(currentPage + 1);\n      sendRequest();\n    }\n  }\n  if (\n    evt.target.nodeName !== 'LI' ||\n    evt.target.classList.contains('pagination__item-hidden')\n  ) {\n    return;\n  }\n  if (String(currentPage) === evt.target.textContent) {\n    return;\n  }\n  changeCurrentPage(evt.target.textContent);\n  sendRequest();\n}\n\n// paginationMarkup();\n\nfunction addEdgeClass() {\n  paginList.lastElementChild.classList.add('pagination-edge');\n  if (currentPage > 3) {\n    paginList.firstElementChild.classList.add('pagination-edge');\n  }\n  if (totalPages - currentPage < 3) {\n    paginList.lastElementChild.classList.remove('pagination-edge');\n  }\n}\n\nfunction addCurrentClassBtn() {\n  const list = document.querySelectorAll('.pagination__item');\n  list.forEach(el => {\n    if (el.textContent === String(currentPage)) {\n      el.classList.add('pagination__currentPage');\n    }\n  });\n}\n\nfunction isEdgePage() {\n  if (currentPage === 1) {\n    prevBtn.disabled = true;\n    prevBtn.classList.remove('pagination__btn');\n    prevBtn.classList.add('pagination__btn-Ldisabled');\n  } else {\n    prevBtn.disabled = false;\n    prevBtn.classList.add('pagination__btn');\n    prevBtn.classList.remove('pagination__btn-Ldisabled');\n  }\n\n  if (currentPage === totalPages) {\n    nextBtn.disabled = true;\n    nextBtn.classList.remove('pagination__btn');\n    nextBtn.classList.add('pagination__btn-Rdisabled');\n  } else {\n    nextBtn.disabled = false;\n    nextBtn.classList.add('pagination__btn');\n    nextBtn.classList.remove('pagination__btn-Rdisabled');\n  }\n}\n\nfunction sendRequest() {\n  if (searchName === null) {\n    paginBlock.removeEventListener('click', onClickPagination);\n    fetchTrends(currentPage).then(res => {\n      markUpForGallery(res.results);\n      localStorage.setItem('response', JSON.stringify(res.results));\n      paginationMarkup(res.page, res.total_pages);\n    });\n  } else {\n    paginBlock.removeEventListener('click', onClickPagination);\n    fetchByName(searchName, currentPage).then(res => {\n      markUpForGallery(res.results);\n      localStorage.setItem('response', JSON.stringify(res.results));\n      paginationMarkup(res.page, res.total_pages, searchName);\n    });\n  }\n}\n\nfunction removePagination() {\n  paginList.innerHTML = '';\n}\n\nexport { paginationMarkup, firstPaginationCall, removePagination };\n","import { fetchTrends, fetchByName, fetchGenres } from './js/api/fetchApi';\nimport {\n  paginationMarkup,\n  firstPaginationCall,\n  removePagination,\n} from './js/pagination';\nlet findErr = document.querySelector('.form-text');\n\nlet obj1 = {};\nlet forLocalStor;\nconst urlImg = 'https://image.tmdb.org/t/p/w500';\nconst galleryItem = document.querySelector('.gallery');\nconst form = document.querySelector('.form');\nspin();\nfunction spin() {\n  galleryItem.innerHTML =\n    '<div class=\"spinner\"><span class=\"spinner__animation\"></span><span class=\"spinner__info\"></span></div>';\n\n  fetchGenres().then(data => {\n    data.genres.map(el => {\n      obj1[el.id] = el.name;\n      localStorage.setItem('genres', JSON.stringify(obj1));\n    });\n  });\n}\n\nfetchTrends(JSON.parse(localStorage.getItem('page'))).then(res => {\n  localStorage.setItem('response', JSON.stringify(res.results));\n  markUpForGallery(res.results);\n  paginationMarkup(res.page, res.total_pages);\n});\n\nform.addEventListener('submit', onSubmit);\n\nfunction onSubmit(evt) {\n  evt.preventDefault();\n\n  const query = evt.currentTarget.name.value.trim();\n\n  if (!query) {\n    evt.target.reset();\n    findErr.classList.remove('visually-hidden');\n    setTimeout(() => {\n      findErr.classList.add('visually-hidden');\n    }, 3000);\n\n    return;\n  }\n\n  spin();\n  const spinEl = document.querySelector('.spinner');\n  function spin() {\n    galleryItem.innerHTML =\n      '<div class=\"spinner\"><span class=\"spinner__animation\"></span><span class=\"spinner__info\"></span></div>';\n    fetchByName(query)\n      .then(res => {\n        \n        if (res.results.length === 0) {\n          findErr.classList.remove('visually-hidden');\n          setTimeout(() => {\n            findErr.classList.add('visually-hidden');\n          }, 3000);\n          paginationMarkup(1, 1);\n          removePagination()\n          return;\n        }\n        evt.target.reset();\n        localStorage.setItem('response', JSON.stringify(res.results));\n        markUpForGallery(res.results);\n        paginationMarkup(res.page, res.total_pages, query);\n      })\n      .catch(err => {\n        console.log(err);\n      })\n      .finally(() => {\n        spinEl.classList.add('visually-hidden');\n      });\n  }\n}\n\nfunction markUpForGallery(arr) {\n  galleryItem.innerHTML = '';\n  if (arr.length > 0 && arr) {\n\n\n    let a = arr.reduce(\n      (acc, el) =>\n      (acc += `<li id='${el.id}' class=\"gallery__item\" >\n      \n          <img \n            class=\"gallery__img no-cover\"\n            src='${el.poster_path\n          ? urlImg + el.poster_path\n          : 'https://s1.hostingkartinok.com/uploads/images/2022/07/40ceaea2e22257d2a139ca5a0c0b8ba9.jpg'\n        }'\n            alt=\"${el.original_title}\"\n            \n          />\n          <div class=\"gallery-text\">\n            <p class=\"gallery-text__title\">${el.original_title}</p>\n            <div class=\"gallery-text__info\">\n\n\n              <p class=\"gallery-text__genre\"> ${el.genre_ids.length\n          ? el.genre_ids.map(gen => {\n            return (gen = obj1[gen]);\n          }).length > 3\n            ? el.genre_ids\n              .map(gen => {\n                return (gen = ' ' + obj1[gen]);\n              })\n              .slice(0, 2) + ', Other '\n            : el.genre_ids.map(gen => {\n              return (gen = ' ' + obj1[gen]);\n            })\n          : 'No genres found'\n        } | ${el.release_date ? el.release_date.slice(0, 4) : 'No info'\n        }</p>\n\n                </div>\n                </div>\n                \n                </li>`),\n\n      ``\n    );\n    galleryItem.insertAdjacentHTML('beforeend', a);\n    return\n  }\n  paginationMarkup(1, 1);\n  removePagination()\n}\n\nexport { markUpForGallery };\n"],"names":["$79e81cc842297628$var$key","$79e81cc842297628$export$1458d52a14f48ec4","name","page","fetch","then","res","json","catch","err","console","log","$79e81cc842297628$export$de059b22708f79a1","$79e81cc842297628$export$e95d448b93b2cdb","$asUcn","parcelRequire","$1f0dc3b9307be026$var$findErr","document","querySelector","$1f0dc3b9307be026$var$obj1","$1f0dc3b9307be026$var$galleryItem","$1f0dc3b9307be026$var$form","$1f0dc3b9307be026$export$ce6ffd2335f38ebb","arr","innerHTML","length","a","reduce","acc","el","id","poster_path","original_title","genre_ids","map","gen","slice","release_date","insertAdjacentHTML","$1bab9c519cfa82bc$export$a88ca8237831132f","$1bab9c519cfa82bc$export$69cd83fdda46a886","fetchGenres","data","genres","localStorage","setItem","JSON","stringify","fetchTrends","parse","getItem","results","total_pages","addEventListener","evt","preventDefault","query","currentTarget","value","trim","target","reset","classList","remove","setTimeout","add","fetchByName","finally","spinEl","$1bab9c519cfa82bc$var$paginList","$1bab9c519cfa82bc$var$paginBlock","$1bab9c519cfa82bc$var$prevBtn","$1bab9c519cfa82bc$var$nextBtn","$1bab9c519cfa82bc$var$totalPages","$1bab9c519cfa82bc$var$currentPage","Number","$1bab9c519cfa82bc$var$searchName","$1bab9c519cfa82bc$var$changeCurrentPage","pages","removeEventListener","$1bab9c519cfa82bc$var$onClickPagination","markup","$1bab9c519cfa82bc$var$addEdgeClass","$1bab9c519cfa82bc$var$addCurrentClassBtn","$1bab9c519cfa82bc$var$isEdgePage","nodeName","dataset","btn","$1bab9c519cfa82bc$var$sendRequest","contains","String","textContent","lastElementChild","firstElementChild","querySelectorAll","forEach","disabled"],"version":3,"file":"index.ee4043db.js.map"}